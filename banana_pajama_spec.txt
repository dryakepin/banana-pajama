# Banana Pajama Zombie Shooter - Spillspecifikation

## Overordnet Koncept
Et top-down zombie survival spil hvor spilleren kontrollerer en banan i pyjamas der skyder zombier i en storby. Spillet skal k√∏re p√• b√•de laptop og mobil. **Stemningen er dyster og m√∏rk** med uhyggelig atmosf√¶re.

## Spillerkarakter
- **Udseende**: En gul banan if√∏rt pyjamas (bl√•/stribet m√∏nster)
- **V√•ben**: En stor skyder/pistol som affyres automatisk eller ved klik/tryk
- **Bev√¶gelse**: 360-graders bev√¶gelse i top-down perspektiv
- **St√∏rrelse**: Ca. 32x48 pixels for optimal visning p√• begge platforme

## Spilleverdenen
- **Setting**: Stor moderne storby med skyskrabere - stort √•bent verden
- **Verdensst√∏rrelse**: Stor spilleverden der str√¶kker sig langt ud over sk√¶rmens gr√¶nser
- **Kamera System**: 
  - Spillerkarakteren er altid centreret p√• sk√¶rmen
  - Verdenen bev√¶ger sig omkring spilleren (scrolling baggrund)
  - Top-down/isometrisk view som Vampire Survivors
- **Stemning**: Dyster og m√∏rk atmosf√¶re
- **Milj√∏**: 
  - Gader med fortove i m√∏rke/d√¶mpede farver
  - Bygninger man kan g√• omkring (ikke ind i) - m√∏rke silhuetter
  - Parkomr√•der, √•bne pladser, industriomr√•der med dystert lys
  - Varierede kvarterer og omr√•der for at skabe afveksling
  - Tekstur-baseret baggrund for at spare performance
- **Belysning**: D√¶mpet/skummel belysning, gadelygter der kaster skygger
- **Farvepalet**: M√∏rke gr√•-, bl√•- og gr√∏nnetoner med kontraster

## Zombier (Fjender)

### Zombie Typer:
1. **Grundzombie** (Gr√∏n)
   - Liv: 1 skud
   - Skade: 10 HP
   - Hastighed: Langsom
   - Spawn rate: H√∏j

2. **Tank Zombie** (M√∏rk gr√∏n/gr√•)
   - Liv: 3-5 skud
   - Skade: 25 HP
   - Hastighed: Meget langsom
   - Spawn rate: Lav

3. **Hurtig Zombie** (Lysegr√∏n)
   - Liv: 1 skud
   - Skade: 15 HP
   - Hastighed: Hurtig
   - Spawn rate: Medium

### Zombie Adf√¶rd:
- F√∏lger altid efter spilleren (pathfinding)
- Spawner uden for sk√¶rmens synsfelt i alle retninger
- Bev√¶ger sig mod spillerens centrerede position
- √òget spawn rate over tid
- Zombier navigerer omkring bygninger og forhindringer i den store verden
- Despawner automatisk n√•r de kommer for langt v√¶k fra spilleren
- **Item drops**: Visse zombie-typer dropper items n√•r de d√∏r (lav sandsynlighed)

## Spillemekanik

### Kontroller:
**Laptop/Desktop:**
- WASD eller piletaster: Bev√¶gelse (verden bev√¶ger sig omkring den centrerede spiller)
- Mus: Sigte og skyde (automatisk skydning mod muspil)
- Eller: Automatisk skydning mod n√¶rmeste zombie
- **Space-tast**: Pause spillet

**Mobil:**
- Virtual joystick til bev√¶gelse (venstre side) - verden scroller
- Automatisk skydning mod n√¶rmeste zombie
- Alternativt: Tap for at sigte og skyde
- Spilleren forbliver altid i sk√¶rmens center
- **Pause knap**: √òverste h√∏jre hj√∏rne af sk√¶rmen

### Spillerens Sundhed:
- Starter med 100 HP
- HP vises som en bar √∏verst p√• sk√¶rmen
- Ved 0 HP: "Game Over" - bananen bliver til banana split (animation)
- Ingen sundhedsgenoprettelse (hardcore survival)

### Scoring:
- Point for hver dr√¶bt zombie:
  - Grundzombie: 10 point
  - Tank Zombie: 50 point
  - Hurtig Zombie: 25 point
- Bonus point for overlevelsestid (1 point per sekund)
- Score vises √∏verst p√• sk√¶rmen

## UI/HUD Design

### In-Game HUD:
```
[HP: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë] [Score: 1,250] [Time: 02:34]    [II] (pause - kun mobil)
```

- **HP Bar**: R√∏d/gr√∏n gradient bar (√∏verst venstre)
- **Score**: Numerisk display (√∏verst midt)
- **Timer**: MM:SS format (√∏verst h√∏jre, desktop) eller (midt, mobil)
- **Pause knap**: "II" ikon (√∏verst h√∏jre hj√∏rne, kun mobil)
- **Mobile tilpasning**: St√∏rre ikoner og tekst
- **Power-up indikatorer**: Vises under HP bar n√•r aktive

### Pause Dialog:
- **Baggrund**: Semi-transparent overlay over spillet
- **Dialog box**: Centreret p√• sk√¶rmen
- **Knapper**: 
  - "Press here to resume" (forts√¶t spillet)
  - "Back to menu" (afslut spillet og g√• til hovedmenu)
- **Aktivering**: Space-tast (desktop) eller pause-knap (mobil)

### Menu System:

#### Hovedmenu:
- **Titel**: "Banana Pajama Zombie Shooter" med grafik
- **Knapper**:
  - "New Game"
  - "High Scores"
  - "Exit" (kun desktop)
- **High Score liste**: Top 10 spillere med navn og score

#### Game Over Sk√¶rm:
- "Game Over" tekst med banana split animation
- Din score og overlevelsestid
- Input felt for navn (hvis top 10)
- Knapper: "Try Again", "Main Menu"

## Power-up System

### Item Drops:
Items dukker op n√•r visse zombie-typer d√∏r med lav sandsynlighed (5-15% afh√¶ngig af zombie-type). Spilleren samler items ved at g√• hen over dem.

### Power-up Typer:

#### **Healing** ü•ô
- **Effekt**: Genopret fuld hit points (100 HP)
- **Ikon**: Kebab
- **Varighed**: √òjeblikkelig
- **Spawn rate**: 5% fra Tank Zombies

#### **Us√•rlighed** üõ°Ô∏è
- **Effekt**: Spilleren tager ingen skade i 10 sekunder
- **Ikon**: Skjold
- **Varighed**: 10 sekunder
- **Visual feedback**: Spilleren blinker/glower
- **Spawn rate**: 15% fra Tank Zombies

#### **Point Boost** ü™ô
- **Effekt**: +50, +100 eller +150 points
- **Ikon**: Guldm√∏nt med point nummer indeni
- **Varighed**: √òjeblikkelig
- **Spawn rate**: 15% fra alle zombie typer

#### **Rapid Fire** üí•
- **Effekt**: Dobbelt skudkadence i 15 sekunder
- **Ikon**: Skud/kugle
- **Varighed**: 15 sekunder
- **Visual feedback**: V√•ben-ikon blinker
- **Spawn rate**: 8% fra Hurtige Zombies

#### **Dual Shot** üî´üî´
- **Effekt**: To skud samtidigt med kort mellemrum i 15 sekunder
- **Ikon**: To skud/kugler
- **Varighed**: 15 sekunder
- **Visual feedback**: Dobbelt muzzle flash
- **Spawn rate**: 10% fra alle zombie typer

#### **Kill All** ‚ò†Ô∏è
- **Effekt**: Alle synlige zombier d√∏r √∏jeblikkeligt
- **Ikon**: D√∏dningehoved
- **Varighed**: √òjeblikkelig
- **Score bonus**: Normal points for hver dr√¶bt zombie
- **Spawn rate**: 4% fra Tank Zombies (sj√¶ldent)

### Power-up Mekanik:
- Items forsvinder efter 30 sekunder hvis ikke samlet op
- Kun et power-up af samme type kan v√¶re aktivt ad gangen
- Hvis spilleren samler det samme power-up igen, forl√¶nges/nulstilles timeren
- Power-up status vises som ikoner under HP baren

## Lyddesign og Atmosf√¶re

### Baggrunds Musik:
- **Stil**: Ambient, uhyggelig og atmosf√¶risk
- **Tempo**: Langsom og dyster
- **Instrumenter**: Synthesizere, m√∏rke pads, sparsomme perkussion
- **Loop**: Kontinuerlig musik der ikke distraherer fra gameplay
- **Volume**: Lav nok til at andre lyde kan h√∏res tydeligt
- **Pause funktion**: Musik pauses n√•r spillet pauses

### Lydeffekter:
- **Pistolskud**: Kraftig, skarp lyd med muligt ekko
- **Zombie spawn**: Knasende/knagende lyd som chips der knuses med hammer
- **Zombie d√∏d**: V√•de, organiske knase-lyde
- **Spillerens d√∏d**: Dramatisk uhyggelig akkord/sting
- **Footsteps**: Subtile fodtrin p√• asfalt (spilleren)
- **Ambient lyde**: Vind, fjerne bylyde for at forst√¶rke atmosf√¶ren
- **Power-up lyde**:
  - Item pickup: Positiv "ding" lyd
  - Power-up activation: Unikt lyd for hver type
  - Power-up expiry: Subtil "whoosh" n√•r effekten oph√∏rer

### Audio Implementation:
- **3D Audio**: Lyde bliver svagere med afstand (is√¶r zombie spawns)
- **Layering**: Flere lydeffekter kan spille samtidigt
- **Volume kontrol**: Mulighed for at justere musik vs. lydeffekter
- **Pause state**: Alle lyde pauses undtagen UI lyde

## Tekniske Specifikationer

### Frontend Stack:
- **Spilmotor**: Phaser.js 3 (gratis, open source HTML5 game framework)
- **Platform**: HTML5 Canvas med cross-platform support
- **Responsive design**: Tilpasser sig sk√¶rmst√∏rrelse (desktop + mobil)
- **Touch support**: Virtual kontroller p√• mobil via Phaser input system
- **Performance**: 60 FPS p√• begge platforme
- **Audio support**: Phaser Audio System med Web Audio API
- **PWA**: Progressive Web App funktionalitet for mobile installation

### Backend Stack:
- **Server**: Node.js med Express.js framework
- **Database**: PostgreSQL (robust, gratis, skalerbar)
- **Web Proxy**: Nginx (reverse proxy, static file serving, SSL)
- **Authentication**: Simple session-based (for high scores)

### Deployment Arkitektur:

#### Lokal Udvikling (MacBook Pro):
- **Docker Desktop**: Containeriseret udviklingmilj√∏
- **Homebrew**: Package management (Node.js, PostgreSQL, Nginx)
- **VS Code**: Udviklings IDE
- **Git**: Version control

#### Cloud Deployment (AWS):
- **Compute**: AWS EC2 t3.micro (gratis tier)
- **Database**: AWS RDS PostgreSQL (gratis tier)
- **Static Assets**: AWS S3 + CloudFront CDN
- **Load Balancer**: AWS Application Load Balancer eller Nginx
- **Monitoring**: AWS CloudWatch

### Projektstruktur:
```
banana-zombie-shooter/
‚îú‚îÄ‚îÄ client/                 # Phaser.js spil
‚îÇ   ‚îú‚îÄ‚îÄ src/scenes/        # Game, Menu, GameOver scener
‚îÇ   ‚îú‚îÄ‚îÄ src/sprites/       # Banan, Zombie klasser
‚îÇ   ‚îú‚îÄ‚îÄ assets/            # Billeder, lyde, fonts
‚îÇ   ‚îî‚îÄ‚îÄ dist/              # Built game files
‚îú‚îÄ‚îÄ server/                # Node.js Express API
‚îÇ   ‚îú‚îÄ‚îÄ routes/api.js      # High score endpoints
‚îÇ   ‚îú‚îÄ‚îÄ models/            # Database modeller
‚îÇ   ‚îî‚îÄ‚îÄ middleware/        # CORS, logging
‚îú‚îÄ‚îÄ database/              # PostgreSQL migrations
‚îú‚îÄ‚îÄ docker/                # Docker configuration
‚îî‚îÄ‚îÄ infrastructure/        # AWS deployment scripts
```

### Asset Behov:
- **Sprites**: Banan karakter, zombier, v√•ben, baggrund tiles (m√∏rke/dystre farver)
  - Format: PNG med alpha transparency
  - St√∏rrelse: Optimeret til b√•de desktop og mobil (32x32 til 64x64 pixels)
- **Power-up ikoner**: Kebab, skjold, guldm√∏nt med tal, skud, dobbelt-skud, d√∏dningehoved
  - Format: PNG, 32x32 pixels
  - Animationer: Subtle glow/pulse effekt
- **Animationer**: Gang, skydning, d√∏d, banana split transformation
  - Format: Sprite sheets eller individuelle frames
- **Lyde**: 
  - **Baggrunds musik**: Ambient, uhyggelig atmosf√¶re (OGG/MP3, looped)
  - **Skudlyde**: Kraftige pistolskud med ekko (WAV/OGG)
  - **Zombie spawn lyd**: Knasende lyd som chips der knuses med hammer
  - **Zombie d√∏dslyde**: V√•de/knasende lyde
  - **Game over lyd**: Dramatisk/uhyggelig akkord
  - **Power-up lyde**: Pickup, activation, expiry lyde for hver type
- **UI elementer**: Knapper, HP bar, pause dialog, font til score/timer (m√∏rkt tema)
- **Asset Hosting**: AWS S3 + CloudFront for hurtig global distribution

### Data Lagring:
- **High Scores**: PostgreSQL database (AWS RDS)
- **Game Sessions**: Database logging (optional analytics)
- **Client Cache**: Browser LocalStorage for settings/preferences
- **Static Assets**: AWS S3 med CloudFront CDN distribution

### API Design:
```javascript
// High Score Endpoints
GET  /api/highscores          // Hent top 10 spillere
POST /api/highscores          // Submit ny high score
{
  "player_name": "string",
  "score": "number", 
  "survival_time": "number"
}

// Game Analytics (optional)
POST /api/sessions/start      // Start game session
POST /api/sessions/end        // Log game completion
```

### Database Schema:
```sql
-- High Scores tabel
CREATE TABLE high_scores (
    id SERIAL PRIMARY KEY,
    player_name VARCHAR(50) NOT NULL,
    score INTEGER NOT NULL,
    survival_time INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Game Sessions tabel (analytics)
CREATE TABLE game_sessions (
    id SERIAL PRIMARY KEY,
    session_id UUID DEFAULT gen_random_uuid(),
    start_time TIMESTAMP DEFAULT NOW(),
    end_time TIMESTAMP,
    final_score INTEGER,
    zombies_killed INTEGER
);
```

## Progression og Sv√¶rhedsgrad
- **Zombie spawn rate** √∏ges over tid
- **Flere zombie typer** introduceres gradvist
- **Hastighed** af zombier √∏ges langsomt
- M√•l: Skabe progressiv udfordring uden at blive unfair

## Performance Overvejelser
- **Sprite pooling** for zombier (genbruge objekter i Phaser)
- **Culling**: Kun render objekter inden for kameraets synsfelt
- **Chunked world loading**: Indl√¶s og afl√¶s verdensomr√•der baseret p√• spillerens position
- **Begr√¶ns zombie antal** (f.eks. max 50 aktive samtidigt)
- **Level-of-detail**: Fjernere objekter bruger mindre detaljerade sprites
- **Asset optimization**: Komprimerede billeder og lyde via CloudFront CDN
- **Progressive loading**: Critical assets f√∏rst, resten bagefter
- **Memory management**: Phaser's indbyggede garbage collection optimering
- **Database queries**: Indexerede high score queries for hurtig respons
- **Viewport optimization**: Kun beregn physics for objekter n√¶r spilleren

## Udvidelses Muligheder
- **Power-ups** (hurtigere skydning, st√¶rkere v√•ben)
- **Forskellige v√•ben typer** med unikke lydeffekter
- **Boss zombier** med specielle spawn lyde
- **Multiplayer mode** via WebSockets (Node.js + Socket.io)
- **Achievements/unlocks** gemt i database
- **Global leaderboards** p√• tv√¶rs af alle spillere
- **Social features**: Del high scores p√• sociale medier
- **Analytics dashboard**: Spil statistikker via AWS CloudWatch