<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, orientation=landscape, minimal-ui, viewport-fit=cover, user-scalable=no">
    <meta name="screen-orientation" content="landscape">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <!-- Enhanced mobile fullscreen support -->
    <meta name="theme-color" content="#1a1a2e">
    <meta name="msapplication-navbutton-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-title" content="Banana Pajama">
    <!-- Disable various mobile browser features -->
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="width">
    <link rel="manifest" href="manifest.json">
    <title>Banana Pajama Zombie Shooter</title>
    <style>
        /* CSS custom properties for mobile viewport handling */
        :root {
            --vh: 1vh;
        }
        
        * {
            box-sizing: border-box;
        }
        
        html {
            height: 100%;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            background-color: #1a1a1a;
            color: #ffffff;
            font-family: 'Courier New', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            /* Use dvh (dynamic viewport height) for better mobile support */
            min-height: 100dvh;
            min-height: -webkit-fill-available;
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100dvh;
            height: -webkit-fill-available;
            top: 0;
            left: 0;
            /* Prevent scrolling and bouncing on mobile */
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: none;
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
            /* Enhanced mobile support */
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            /* Handle safe areas for notched devices - but use 0 for fullscreen */
            padding-top: 0;
            padding-bottom: 0;
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }

        /* iOS-specific fixes for fullscreen */
        @supports (-webkit-touch-callout: none) {
            body {
                /* iOS Safari specific */
                height: -webkit-fill-available;
            }
        }
        
        #game-container {
            /* Default desktop styles moved to media query below */
        }
        
        canvas {
            display: block;
            border-radius: 6px;
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            text-align: center;
        }
        
        .loading h1 {
            color: #ffff00;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            margin-bottom: 20px;
        }
        
        .loading-bar {
            width: 300px;
            height: 20px;
            background-color: #333;
            border: 2px solid #666;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .loading-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444, #ffff44, #44ff44);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Force landscape orientation on mobile */
        @media screen and (max-width: 768px) {
            body {
                transform-origin: center center;
            }
            
            /* Hide content in portrait mode and show rotation message */
            @media (orientation: portrait) {
                #game-container {
                    display: none;
                }
                
                body::before {
                    content: "ðŸ“± Please rotate your device to landscape mode to play";
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0, 0, 0, 0.9);
                    color: white;
                    padding: 20px;
                    border-radius: 10px;
                    text-align: center;
                    font-size: 18px;
                    z-index: 10000;
                    width: 80%;
                    box-sizing: border-box;
                }
            }
            
            @media (orientation: landscape) {
                #game-container {
                    display: block;
                    width: 100vw;
                    height: 100dvh;
                    height: -webkit-fill-available;
                    position: fixed;
                    top: 0;
                    left: 0;
                    z-index: 1000;
                }

                canvas {
                    width: 100vw !important;
                    height: 100dvh !important;
                    height: -webkit-fill-available !important;
                    position: fixed !important;
                    top: 0 !important;
                    left: 0 !important;
                }
            }
        }
        
        /* Desktop styles remain unchanged */
        @media screen and (min-width: 769px) {
            #game-container {
                border: 2px solid #333;
                border-radius: 8px;
                background-color: #000;
            }
        }
        
        /* Phaser Scale Manager fullscreen styles */
        body.phaser-fullscreen {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            height: 100dvh !important;
            z-index: 99999 !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        body.phaser-fullscreen #game-container {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            height: 100dvh !important;
            z-index: 100000 !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        body.phaser-fullscreen canvas {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            height: 100dvh !important;
            z-index: 100001 !important;
            margin: 0 !important;
            padding: 0 !important;
            border: none !important;
            outline: none !important;
        }
        
        /* Android fullscreen fallback when API fails */
        body.android-fullscreen {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 99999 !important;
        }
        
        body.android-fullscreen #game-container {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 100000 !important;
        }
        
        body.android-fullscreen canvas {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            height: 100dvh !important; /* Dynamic viewport height for newer browsers */
            z-index: 100001 !important;
            margin: 0 !important;
            padding: 0 !important;
            border: none !important;
            outline: none !important;
        }
        
        /* Chrome Mobile specific overrides */
        @media screen and (max-width: 768px) {
            body.android-fullscreen {
                /* Force full viewport usage on Chrome Mobile */
                min-height: 100vh !important;
                min-height: 100dvh !important;
                max-height: 100vh !important;
                max-height: 100dvh !important;
                /* Prevent any scrollbars or overflow */
                -webkit-overflow-scrolling: touch !important;
            }
            
            body.android-fullscreen #game-container {
                min-height: 100vh !important;
                min-height: 100dvh !important;
                max-height: 100vh !important;
                max-height: 100dvh !important;
            }
            
            body.android-fullscreen canvas {
                /* Ensure canvas uses full dynamic viewport height */
                height: 100dvh !important;
                min-height: 100dvh !important;
                max-height: 100dvh !important;
            }
        }
        
        /* Chrome-specific viewport handling */
        @supports (height: 100dvh) {
            body.phaser-fullscreen,
            body.phaser-fullscreen #game-container,
            body.phaser-fullscreen canvas,
            body.android-fullscreen,
            body.android-fullscreen #game-container,
            body.android-fullscreen canvas {
                height: 100dvh !important;
            }
        }
        
        /* iOS fullscreen optimization */
        body.ios-fullscreen {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100dvh !important;
            height: -webkit-fill-available !important;
            z-index: 99999 !important;
            /* iOS-specific overrides */
            -webkit-overflow-scrolling: touch !important;
            -webkit-transform: translate3d(0, 0, 0) !important;
        }

        body.ios-fullscreen #game-container {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100dvh !important;
            height: -webkit-fill-available !important;
            z-index: 100000 !important;
        }

        body.ios-fullscreen canvas {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100dvh !important;
            height: -webkit-fill-available !important;
            z-index: 100001 !important;
            margin: 0 !important;
            padding: 0 !important;
            border: none !important;
            outline: none !important;
        }

        /* Add to home screen banner for better fullscreen experience */
        .install-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(26, 26, 46, 0.95);
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 14px;
            z-index: 200000;
            border-top: 2px solid #ffff00;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
            display: none;
        }

        .install-banner.show {
            display: block;
        }

        .install-banner button {
            background: #ffff00;
            color: #1a1a2e;
            border: none;
            padding: 8px 15px;
            margin: 5px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            cursor: pointer;
            font-size: 12px;
        }

        .install-banner button:hover {
            background: #ffff44;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div class="loading" id="loading-screen">
            <h1>Banana Pajama Zombie Shooter</h1>
            <div class="loading-bar">
                <div class="loading-fill" id="loading-fill"></div>
            </div>
            <p>Loading...</p>
        </div>
    </div>

    <!-- Install banner for true fullscreen experience -->
    <div id="install-banner" class="install-banner">
        <div>
            <strong>ðŸ“± For the best fullscreen experience:</strong><br>
            <span id="install-instructions"></span>
        </div>
        <button id="dismiss-banner">Got it!</button>
    </div>
</body>
</html>